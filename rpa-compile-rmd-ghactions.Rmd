---
layout: page
title: "RPA - 자동화(Automation)"
subtitle: "GitHub Action: Rmd 파일 컴파일 - CI"
output:
  html_document:
    includes:
      in_header: header.html
      after_body: footer.html
    theme: default
    toc: yes
    toc_depth: 2
    toc_float: true
    highlight: tango
    code_folding: show
    number_section: true
    self_contained: true
bibliography: bibliography_rpa.bib
csl: biomed-central.csl
mainfont: NanumGothic
editor_options: 
  chunk_output_type: console
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE,
                      comment="", digits = 3, tidy = FALSE, prompt = FALSE, fig.align = 'center')

library(tidyverse)
Sys.setlocale("LC_MESSAGES", "C")
```


# GitHub Actions YML 파일작성 {#write-yml-script}


```{r write-yml, eval = FALSE}
name: Render Weather Report

# Controls when the action will run
on:
  push:
    branches: gh-pages

jobs:
  render:
    # The type of runner that the job will run on
    runs-on: macOS-latest

    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2
    - uses: r-lib/actions/setup-r@v1
    - uses: r-lib/actions/setup-pandoc@v1

    # install packages needed
    - name: install required packages
      run: Rscript -e 'install.packages(c("rmarkdown", "tidyverse", "httr", "glue", "jsonlite"))'

    # Render READEME.md using rmarkdown
    - name: render weather report
      run: Rscript -e 'rmarkdown::render("rpa-write-rmd-file.Rmd")'

    - name: commit rendered README
      run: |
        git add rpa-write-rmd-file.Rmd rpa-write-rmd-file.html
        git commit -m "Re-compile rpa-write-rmd-file.Rmd" || echo "No changes to commit"
        git push origin gh-pages || echo "No changes to commit"
        
```


```{r embed-yml-file}
xfun::embed_file('.github/workflows/render_rmd_file.yml')
```


# GitHub Actions 서버 {#github-actions-server}


![](fig/weather-github-action-results.png)

![](fig/weather-github-action-results-details.png)
